<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <record id="edit_project" model="ir.ui.view">
      <field name="name">project.project.form.inherited</field>
      <field name="model">project.project</field>
      <field name="inherit_id" ref="project.edit_project"/>
      <field name="arch" type="xml">
     


        <notebook>
          <page string="Lots et Fonctions">
                                  <div>
                        <button class="oe_highlight" name="lot" string="Lots Fonctionnels" type="object" width="50%"/>
                      </div>
          <field name="lot_projet_ids">
                       <field name="lot_template_id"/>
                      <!-- <field name="computed_fonction_ids"  />-->
                     <field name="project_fonction_ids"  domain="[('id','in', computed_fonction_ids[0][2])]"  string="Fonctions" widget="many2many_tags" />


                    </field>

          </page>
        </notebook>
        <notebook>
          <page string="Paramètres ">
            <notebook>
              <page string="Unités Oeuvres">
                <field name="unites_oeuvres_projet_ids">
                  <tree>
                    <field invisible="1" name="name"/>
                    <field name="uo_template_id"/>
                    <field name="charge_unite"/>
                  </tree>
                </field>
                <page string="Complexités">
                  <field name="complexite_projet_ids">
                    <tree>
                      <field invisible="1" name="name"/>
                      <field name="complexite_template_id"/>
                      <field name="coeff_complexite"/>
                    </tree>
                  </field>
                  <page string="Profils">

                    <field name="profil_projet_ids">
                      <tree>
                        <field name="profil_template_id"/>
                        <field name="cout_horaire"/>
                      </tree>
                    </field>
                    <page>
                      <div>
                        <button class="oe_highlight" name="matrice_complexite_value" string="Matrice Complexité" type="object" width="50%"/>
                      </div>
                      <field name="param_estim_ids">
                        <tree create="0">
                          <field name="unite_oeuvre_id"/>
                          <field name="complexite_id"/>
                          <field name="charge_std"/>
                        </tree>
                      </field>
                    </page>
                  </page>
                </page>
              </page>
            </notebook>
            <notebook/>
          </page>
        </notebook>
        <notebook>
          <page string="Estimation">

<div>
                        <button class="oe_highlight" name="lots_value" string="Géneration des Lots Fonctionnels" type="object" width="50%"/>
                      </div>
            <field context="{'current_id':active_id}" name="project_estim_ids">
              <tree editable="bottom">
                <field domain="[('project_id','=',current_id)]" name="project_lot_id">
                  <field name="name"/>
                </field>
                <field  name="project_fonction_id"/>

              <!--<field domain="[('lot_template_id','=', project_lot_id)]" name="project_fonction_id"/>-->
           <!--  <field  name="project_fonction_id"/>-->


              <field domain="[('project_id','=',current_id)]" name="project_profil_id" />
                <field domain="[('project_id','=',current_id)]" name="project_param_estim_id"/>
                <field domain="[('project_id','=',current_id)]" name="charge_related_std"/>
                <field name="nombre"/>
                <field name="cout_total" sum="Cout Total :"/>
              </tree>
            </field>
          </page>
        </notebook>
      </field>
    </record>
    <!--   *****************************Projet_bord********************* -->
    <record id="projectt_form" model="ir.ui.view">
      <field name="name">projectt_form</field>
      <field name="model">project.project</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <field name="project_ids" widget="many2many_tags"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>
    <record id="project_paramfct_tree" model="ir.ui.view">
      <field name="name">projectt_tree</field>
      <field name="model">project.project</field>
      <field name="arch" type="xml">
        <tree>
          <field name="project_ids" widget="many2many_tags"/>
        </tree>
      </field>
    </record>
    <!--   *****************************Profils********************* -->
    <record id="project_profile_form" model="ir.ui.view">
      <field name="name">project_profile_form</field>
      <field name="model">aogp.project.profil</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <field invisible="1" name="name"/>
              <field name="profil_template_id"/>
              <field name="cout_horaire"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>
    <record id="project_profile_tree" model="ir.ui.view">
      <field name="name">project_profile_tree</field>
      <field name="model">aogp.project.profil</field>
      <field name="arch" type="xml">
        <tree>
          <field name="profil_template_id"/>
          <field name="cout_horaire"/>
        </tree>
      </field>
    </record>
    <!--   *****************************Profils_template********************* -->
    <record id="project_profile_template_form" model="ir.ui.view">
      <field name="name">project_profile_template_form</field>
      <field name="model">aogp.project.profil.template</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <field name="name"/>
              <field name="cout_profil"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>
    <record id="project_profile_template_tree" model="ir.ui.view">
      <field name="name">project_profile_template_tree</field>
      <field name="model">aogp.project.profil.template</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>
          <field name="cout_profil"/>
        </tree>
      </field>
    </record>
  </data>
</openerp>